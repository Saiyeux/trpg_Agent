# 意图识别系统测试指南

## 模块说明
意图识别系统是TRPG Agent的第一层AI架构，负责理解用户的自然语言输入，将其转换为结构化的游戏意图。这是整个系统的入口，其准确性直接影响后续的游戏体验。

## 测试目标
- ✅ 验证基本意图分类的准确性（攻击、对话、搜索等）
- ✅ 测试复杂语句的理解能力
- ✅ 检查目标识别的准确性
- ✅ 验证置信度评估的合理性
- ✅ 测试边界情况和错误输入的处理

## 支持的意图类别

### 1. 攻击类 (category: "攻击")
**触发词汇**: "攻击"、"打"、"砍"、"刺"、"射击"、"战斗"、"杀"、"击"等
**示例输入**:
- "我攻击哥布林"
- "用剑砍向敌人"  
- "射箭攻击远处的弓箭手"

### 2. 搜索类 (category: "搜索")
**触发词汇**: "搜索"、"寻找"、"查看"、"观察"、"探索"、"检查"等
**示例输入**:
- "搜索房间"
- "查看宝箱里有什么"
- "探索周围环境"

### 3. 对话类 (category: "对话")
**触发词汇**: "说话"、"交谈"、"询问"、"告诉"、"对话"、"和...对话"等
**示例输入**:
- "和商人对话"
- "询问NPC关于任务的信息"
- "告诉守卫我的来意"

### 4. 交易类 (category: "交易")
**触发词汇**: "购买"、"买"、"交易"、"售卖"、"商店"、"花钱"等
**示例输入**:
- "购买治疗药水"
- "和商人交易"
- "卖掉多余的装备"

### 5. 移动类 (category: "移动")
**触发词汇**: "去"、"走"、"移动"、"进入"、"离开"、"前往"等
**示例输入**:
- "前往村庄"
- "进入洞穴"
- "离开当前位置"

### 6. 状态查询类 (category: "状态查询")
**触发词汇**: "状态"、"属性"、"背包"、"血量"、"技能"、"查看我的"等
**示例输入**:
- "查看我的状态"
- "打开背包"
- "检查我的技能"

## 测试用例建议

### 基础功能测试
1. **简单直接的命令**
   - "攻击哥布林" → 应识别为攻击类，目标：哥布林
   - "和商人对话" → 应识别为对话类，目标：商人
   - "搜索房间" → 应识别为搜索类，目标：房间

2. **复合句式测试**
   - "我想要攻击面前的哥布林" → 攻击类
   - "能否请您告诉我前往下一个村庄的路径？" → 对话类
   - "仔细搜查这个看起来可疑的宝箱" → 搜索类

3. **模糊表达测试**  
   - "干掉那个家伙" → 应识别为攻击类
   - "看看那边有什么" → 应识别为搜索类
   - "跟他聊聊" → 应识别为对话类

### 边界情况测试
1. **多动作语句**
   - "我先攻击哥布林，然后搜索房间" → 应优先识别第一个动作
   
2. **无明确目标**
   - "我要攻击" → 攻击类，目标：周围/未指定
   - "搜索一下" → 搜索类，目标：周围

3. **错误或无意义输入**
   - "asdfgh" → 应归类为"其他"
   - "" (空输入) → 应有错误处理

### 质量评估重点
1. **准确性**: 分类是否正确
2. **目标识别**: 是否准确提取了目标对象
3. **置信度**: 置信度是否合理（简单明确的应该高，模糊的应该低）
4. **响应时间**: 处理时间是否在可接受范围内（< 3秒）

## 测试执行步骤

### 步骤1: 基础功能验证
按照上述测试用例，输入不同类型的指令，验证系统能否正确识别意图类别。

### 步骤2: 目标提取测试
重点检查系统是否能准确识别用户指令中的目标对象（如"哥布林"、"商人"、"房间"等）。

### 步骤3: 复杂语句测试
使用更复杂、更自然的语言表达，测试系统的理解能力上限。

### 步骤4: 边界情况测试
测试系统对异常输入、模糊输入的处理能力。

### 步骤5: 性能测试
观察各种输入的处理时间和置信度分布。

## 检查清单
- [ ] 所有基本意图类别都能正确识别
- [ ] 目标对象提取准确
- [ ] 复杂语句理解正确
- [ ] 边界情况处理合理
- [ ] 响应时间在可接受范围内
- [ ] 置信度评估符合预期
- [ ] 没有出现意外的错误或崩溃

## 常见问题

**Q: 为什么某些攻击意图被识别成对话？**  
A: 可能是因为包含了对话性质的词汇，如"和...战斗"可能被理解为对话。建议使用更直接的攻击词汇。

**Q: 系统对代词的处理如何？**  
A: 系统会尝试根据上下文推断"它"、"他"等代词的具体指向，但可能不够准确。

**Q: 置信度低于多少算异常？**  
A: 一般来说，简单明确的指令置信度应该在0.8以上，低于0.5可能表示识别困难。

## 完成标准
- 基础意图分类准确率 ≥ 90%
- 目标提取准确率 ≥ 85%
- 平均响应时间 ≤ 2秒
- 没有系统崩溃或异常错误
- 置信度分布合理（明确指令高，模糊指令低）

## 问题反馈
测试过程中发现的问题请记录：
- 具体的输入内容
- 期望的识别结果
- 实际的识别结果
- 问题的严重程度（轻微/中等/严重）

祝测试顺利！🎯